(this["webpackJsonpreact-redux-training-timer"]=this["webpackJsonpreact-redux-training-timer"]||[]).push([[0],{105:function(e,t,n){},106:function(e,t,n){},117:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(11),c=n.n(r),o=(n(105),n(106),n(46)),s=n(24),l=n(8),u=n(23),d=n(163),m=function(e){var t=e.minute,n=e.second;return Object(u.isInteger)(t)&&Object(u.isInteger)(n)?1e3*(60*t+n):0},j=function(e){var t={id:e&&e.timerId?e.timerId:Object(d.a)(),label:e&&e.label?e.label:"timer label",minute:e&&e.minute?e.minute:0,second:e&&e.second?e.second:3,remainTime:0,music:e&&e.music?e.music:"Muay_Thai_Sarama_ROUND_1.mp3"};return t.remainTime=m({minute:t.minute,second:t.second}),t},b=function(e){return""===function(e){var t=e.value,n=e.timeUnit;return"minute"!==n&&"second"!==n?"Time unit must be either 'minute' or 'second'":Number.isInteger(parseInt(t))?parseInt(t)<0||parseInt(t)>59?"Time value must be between 0 and 59":"":"Time value must be an integer"}({value:e.value,timeUnit:e.timeUnit})},f=n(75),p=n(53),O=n(37),h=n(54),v={RUNNING:"RUNNING",PAUSED:"PAUSED",STOPPED:"STOPPED"},g=Object(O.b)(),x=Object(O.c)({name:"timers",initialState:function(){var e=function(){try{var e=localStorage.getItem("timers");if(null===e)return;var t=JSON.parse(e),n=t.entities;return Object.values(n).forEach((function(e){e.remainTime=m({minute:e.minute,second:e.second})})),{ids:t.ids,entities:n,totalLoop:t.totalLoop}}catch(i){return}}(),t={showCountdown:!1,delay:1e3,activeTimerId:null,activeTimerMusic:"",status:v.STOPPED,loop:{current:1,total:1},mute:{alarm:!1,music:!1}};return e&&e.entities&&e.ids&&e.totalLoop&&(t=Object(p.a)(Object(p.a)({},t),{},{entities:e.entities,ids:e.ids,loop:Object(p.a)(Object(p.a)({},t.loop),{},{total:e.totalLoop})})),g.getInitialState(t)}(),reducers:{timersInitialized:g.addMany,timerAdded:g.addOne,timerDeleted:g.removeOne,timerSetLabel:function(e,t){var n=t.payload,i=n.timerId,a=n.label;e.entities[i].label=a},timerSetTime:{reducer:function(e,t){var n=t.payload,i=n.timerId,a=n.value,r=n.timeUnit,c=e.entities[i];"minute"!==r&&"second"!==r||(c[r]=Number.isInteger(parseInt(a))?parseInt(a):"",c.remainTime=b({value:a,timeUnit:r})?1e3*(60*c.minute+c.second):0)},prepare:function(e,t,n){return{payload:{timerId:e,value:t,timeUnit:n}}}},timerSetMusic:function(e,t){var n=t.payload,i=n.timerId,a=n.music;e.entities[i].music=a},timerDeductTime:{reducer:function(e,t){var n=t.payload,i=n.timerId,a=n.delay;e.entities[i].remainTime-=a},prepare:function(e){var t=e.timerId,n=e.delay;return n||(n=1e3),{payload:{timerId:t,delay:n}}}},timerStatusUpdated:function(e,t){var n=t.payload.status;e.status=n},timerSetNextTimer:function(e){var t,n=Object.values(e.entities),i=Object(f.a)(n.entries());try{for(i.s();!(t=i.n()).done;){var a=Object(o.a)(t.value,2),r=a[0],c=a[1];if(c.remainTime>0){e.activeTimerId=c.id,e.activeTimerMusic=c.music;break}r===n.length-1&&(e.status=v.STOPPED)}}catch(s){i.e(s)}finally{i.f()}},timerDelayUpdated:function(e,t){var n=t.payload.delay;e.delay=n},timerResetTimers:function(e){e.activeTimerId=null,e.activeTimerMusic="",e.status=v.STOPPED,Object.values(e.entities).forEach((function(e){e.remainTime=m({minute:e.minute,second:e.second})})),e.loop.current=1},timerResetRemainTime:function(e){Object.values(e.entities).forEach((function(e){e.remainTime=m({minute:e.minute,second:e.second})}))},timerSetShowCountdown:function(e,t){var n=t.payload.showCountdown;e.showCountdown=n},timerSetCurrentLoop:function(e,t){var n=t.payload;n&&Object(u.isInteger)(n)&&(e.loop.current=n)},timerSetTotalLoop:function(e,t){var n=t.payload;n&&(e.loop.total=Number.isInteger(parseInt(n))?parseInt(n):"")},timerToggledMute:function(e,t){var n=t.payload.muteType;"alarm"===n&&(e.mute.alarm=!e.mute.alarm),"music"===n&&(e.mute.music=!e.mute.music)}}}),y=x.reducer,I=x.actions,N=(I.timersInitialized,I.timerAdded),S=I.timerDeleted,T=I.timerSetLabel,w=I.timerSetTime,C=I.timerSetMusic,k=I.timerDeductTime,M=I.timerStatusUpdated,P=I.timerSetNextTimer,U=I.timerDelayUpdated,D=I.timerResetTimers,R=I.timerResetRemainTime,E=I.timerSetShowCountdown,L=I.timerSetCurrentLoop,W=I.timerSetTotalLoop,z=I.timerToggledMute,B=g.getSelectors((function(e){return e.timers})),A=B.selectAll,_=B.selectById,G=B.selectTotal,F=function(e){return e.timers.showCountdown},H=function(e){return e.timers.delay},J=function(e){return e.timers.activeTimerId},q=function(e){return e.timers.status},Y=Object(h.a)(A,G,(function(e,t){return Object.values(e)[t-1].id})),$=function(e){return e.timers.loop.current},K=function(e){return e.timers.loop.total},Q=function(e){return e.timers.mute.music},V=function(e){return e.timers.activeTimerMusic},X=n(144),Z=n(146),ee=n(148),te=n(160),ne=n(165),ie=n(151),ae=n(167),re=n(161),ce=n(168),oe=n(80),se=n.n(oe),le=n(3),ue=Object(X.a)((function(e){var t;return{musicInput:{minWidth:200},timerContainer:(t={borderRadius:30,padding:"10px 20px"},Object(s.a)(t,e.breakpoints.up("sm"),{padding:"20px 40px"}),Object(s.a)(t,"marginTop",e.spacing(2)),Object(s.a)(t,"marginBottom",e.spacing(2)),t),timerToolbar:Object(s.a)({justifyContent:"center"},e.breakpoints.up("sm"),{justifyContent:"flex-start"}),timerInput:{minWidth:60},deleteButton:{opacity:.2,position:"absolute",top:15,right:20,transition:"opacity 0.5s ease",zIndex:2,"&:hover":{opacity:1}}}})),de=function(e){var t,n,i=e.id,a=Object(l.b)(),r=ue(),c=Object(l.c)((function(e){return _(e,i)})),o=function(e){var t=e.event.target.value,n=e.timeUnit;a(w(c.id,t,n))};return Object(le.jsxs)(Z.a,{variant:"outlined",className:r.timerContainer,style:{position:"relative"},children:[Object(le.jsx)(ee.a,{onClick:function(){return a(S(c.id))},className:r.deleteButton,size:"small",children:Object(le.jsx)(se.a,{fontSize:"small"})}),Object(le.jsx)(te.a,{m:1,display:"flex",justifyContent:"center",children:Object(le.jsx)(ne.a,{value:null!==(t=c.label)&&void 0!==t?t:"",onChange:function(e){return function(e){return a(T({timerId:c.id,label:e.target.value}))}(e)},inputProps:{style:{textAlign:"center"}}})}),Object(le.jsxs)(te.a,{display:"flex",alignItems:"center",justifyContent:"center",children:[Object(le.jsx)(te.a,{m:1,children:Object(le.jsx)(ne.a,{id:"timer-".concat(i,"-min"),label:"Minute",type:"number",InputLabelProps:{shrink:!0},inputProps:{min:0,max:59,inputMode:"numeric",className:r.timerInput},variant:"outlined",onChange:function(e){return o({event:e,timeUnit:"minute"})},value:c.minute,error:!b({value:c.minute,timeUnit:"minute"})})}),Object(le.jsx)(te.a,{m:1,children:":"}),Object(le.jsx)(te.a,{m:1,children:Object(le.jsx)(ne.a,{id:"timer-".concat(i,"-sec"),label:"Second",type:"number",InputLabelProps:{shrink:!0},variant:"outlined",inputProps:{min:0,max:59,inputMode:"numeric",className:r.timerInput},onChange:function(e){return o({event:e,timeUnit:"second"})},value:c.second,error:!b({value:c.second,timeUnit:"second"})})})]}),Object(le.jsx)(te.a,{display:"flex",className:r.timerToolbar,children:Object(le.jsxs)(ie.a,{children:[Object(le.jsx)(ae.a,{id:"timer-music-".concat(c.id,"-label"),children:"Timer Music"}),Object(le.jsxs)(re.a,{labelId:"timer-music-".concat(c.id,"-label"),id:"timer-music-".concat(c.id),value:null!==(n=c.music)&&void 0!==n?n:"",onChange:function(e){return a(C({timerId:c.id,music:e.target.value}))},className:r.musicInput,children:[Object(le.jsx)(ce.a,{value:"",children:"No Music"}),Object(le.jsx)(ce.a,{value:"Muay_Thai_Sarama_ROUND_1.mp3",children:"Muay Thai Music"})]})]})})]})},me=function(){var e=Object(l.c)((function(e){return A(e)}));return Object(le.jsx)("main",{children:e.map((function(e){return Object(le.jsx)(de,{id:e.id},e.id)}))})};var je=n(88),be=Object(X.a)({digits:{margin:10},millisecond:{position:"absolute",bottom:5,right:-40},mainDisplay:{position:"relative",width:"fit-content",margin:"0 auto"}}),fe=function(e){var t,n=e.alarmPlayer,a=Object(l.b)(),r=be(),c=Object(l.c)(J),o=Object(l.c)((function(e){return _(e,c)})),s=Object(l.c)((function(e){return H(e)})),d=Object(l.c)(q),m=Object(l.c)(Y),j=Object(l.c)($),b=Object(l.c)(K),f=(t=o.remainTime,!Object(u.isInteger)(t)||t<=0?{millisec:0,second:0,minute:0}:{millisec:t%1e3/10,second:Math.floor(t/1e3)%60,minute:Math.floor(t/1e3/60)%60}),p=function(e){return e<10?"0"+e:e};return function(e,t){var n=Object(i.useRef)();Object(i.useEffect)((function(){n.current=e}),[e]),Object(i.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){a(k({timerId:o.id,delay:s})),o.remainTime-s<=0&&(n.current.play(),c===m?j<b?(a(L({current:j+1})),a(R()),a(P())):a(M({status:v.STOPPED})):a(P()))}),d===v.RUNNING&&c&&o.id===c?s:null),Object(le.jsxs)(te.a,{textAlign:"center",height:"100%",display:"flex",flexDirection:"column",children:[Object(le.jsxs)(je.a,{variant:"h4",component:"div",style:{marginTop:10},children:["Round: ",j," / ",b]}),Object(le.jsxs)(te.a,{display:"flex",justifyContent:"center",flexDirection:"column",height:"100%",children:[Object(le.jsx)(je.a,{variant:"h4",component:"div",style:{marginBottom:10},children:o.label}),Object(le.jsxs)(te.a,{display:"flex",justifyContent:"center",alignItems:"center",className:r.mainDisplay,children:[Object(le.jsx)(je.a,{variant:"h2",component:"div",className:"".concat(r.digits),children:p(f.minute)}),Object(le.jsx)(je.a,{variant:"h3",children:":"}),Object(le.jsx)(je.a,{variant:"h2",component:"div",className:"".concat(r.digits),children:p(f.second)}),s<1e3&&Object(le.jsx)(je.a,{variant:"h5",className:"".concat(r.millisecond," ").concat(r.digits),children:p(f.millisec)})]})]})]})},pe=n.p+"static/media/timesup.e69d4f91.mp3",Oe=n(63),he=n.n(Oe),ve=n(152),ge=Object(X.a)({mainSection:{overflowY:"scroll"}}),xe=function(e){var t=e.heightOfMainSection,n=ge(),a=Object(l.c)(q),r=Object(l.c)(F),c=Object(i.useRef)(null);return a===v.RUNNING||r?Object(le.jsxs)(ve.a,{maxWidth:"sm",style:{height:t},children:[Object(le.jsx)(fe,{alarmPlayer:c}),Object(le.jsx)(he.a,{src:pe,playing:!1,html5:!0,ref:c})]}):Object(le.jsx)(te.a,{style:{height:t},className:n.mainSection,children:Object(le.jsx)(ve.a,{maxWidth:"sm",children:Object(le.jsx)(me,{})})})},ye=n(153),Ie=n(82),Ne=n.n(Ie),Se=n(83),Te=n.n(Se),we=n(81),Ce=n.n(we),ke=n(64),Me=n.n(ke),Pe=Object(X.a)((function(e){return{formControl:{width:125},controlPanelContainer:Object(s.a)({position:"relative",padding:e.spacing(1)},e.breakpoints.up("sm"),{padding:e.spacing(3)}),addButton:Object(s.a)({position:"absolute",top:0,right:0,zIndex:2},e.breakpoints.up("sm"),{right:50}),toolbar:{marginTop:16}}})),Ue=function(e){var t=e.setHeightOfControlPanel,n=e.handleModalStatus,a=Pe(),r=Object(l.b)(),c=Object(l.c)(q),o=Object(l.c)(J),s=Object(l.c)(K),u=Object(l.c)(Q),d=Object(l.c)(F);return Object(i.useEffect)((function(){var e=document.getElementById("control-panel").clientHeight;t(e)})),Object(le.jsx)(Z.a,{elevation:10,id:"control-panel",children:Object(le.jsxs)(ve.a,{maxWidth:"md",className:a.controlPanelContainer,children:[Object(le.jsx)(ee.a,{size:"medium",onClick:function(){return r(N(j()))},disabled:d,className:a.addButton,color:"primary",children:Object(le.jsx)(Ce.a,{})}),Object(le.jsxs)(te.a,{display:"flex",justifyContent:"center",children:[Object(le.jsx)(te.a,{m:1,children:Object(le.jsx)(ye.a,{onClick:function(){o||r(P()),r(M({status:c===v.RUNNING?v.PAUSED:v.RUNNING})),r(E({showCountdown:!0}))},variant:"contained",color:"primary",size:"large",disabled:d&&c===v.STOPPED,children:c===v.RUNNING?"Pause":"Start"})}),Object(le.jsx)(te.a,{m:1,children:Object(le.jsx)(ye.a,{onClick:function(){r(E({showCountdown:!1})),r(D())},variant:"contained",color:"secondary",size:"large",children:"Reset"})})]}),Object(le.jsxs)(te.a,{display:"flex",justifyContent:"space-around",className:a.toolbar,children:[Object(le.jsxs)(te.a,{display:"flex",justifyContent:"space-between",children:[Object(le.jsx)(ee.a,{onClick:function(e){return n(e,!0)},children:Object(le.jsx)(Me.a,{})}),Object(le.jsx)(ee.a,{onClick:function(){return r(z({muteType:"music"}))},children:u?Object(le.jsx)(Ne.a,{}):Object(le.jsx)(Te.a,{})})]}),Object(le.jsx)(ie.a,{className:a.formControl,children:Object(le.jsx)(ne.a,{id:"loop",label:"No. of rounds",type:"number",InputLabelProps:{shrink:!0},variant:"outlined",value:s,inputProps:{inputMode:"numeric"},onChange:function(e){return r(W(e.target.value))},disabled:d,size:"small",error:Number.isNaN(parseInt(s))||parseInt(s)<1})})]})]})})},De={darkMode:function(){var e=localStorage.getItem("darkMode");return null!==e?"true"===e:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}()},Re=Object(O.c)({name:"settings",initialState:De,reducers:{toggleDarkMode:function(e){e.darkMode=!e.darkMode}}}),Ee=Re.reducer,Le=Re.actions.toggleDarkMode,We=function(e){return e.settings.darkMode},ze=n(164),Be=n(154),Ae=n(155),_e=n(156),Ge=n(157),Fe=n(169),He=Object(X.a)({formControl:{width:125}}),Je=function(e){var t=e.open,n=e.handleOpen,i=Object(l.b)(),a=He(),r=Object(l.c)(H),c=Object(l.c)(We);return Object(le.jsxs)(ze.a,{onClose:function(e){return n(e,!1)},"aria-labelledby":"settings-dialog-title",open:t,maxWidth:"sm",fullWidth:!0,children:[Object(le.jsx)(Be.a,{id:"settings-dialog-title",children:Object(le.jsxs)(te.a,{display:"flex",alignItems:"center",children:[Object(le.jsx)(Me.a,{}),Object(le.jsx)(je.a,{component:"span",style:{marginLeft:10},children:"Settings"})]})}),Object(le.jsx)(Ae.a,{style:{paddingBottom:16},children:Object(le.jsxs)(_e.a,{container:!0,children:[Object(le.jsx)(_e.a,{item:!0,xs:6,children:Object(le.jsxs)(ie.a,{className:a.formControl,children:[Object(le.jsx)(ae.a,{children:"Refresh rate"}),Object(le.jsxs)(re.a,{id:"updateFreq",value:r,onChange:function(e){return function(e){return i(U({delay:e.target.value}))}(e)},children:[Object(le.jsx)(ce.a,{value:10,children:"10"}),Object(le.jsx)(ce.a,{value:100,children:"100"}),Object(le.jsx)(ce.a,{value:1e3,children:"1000"})]})]})}),Object(le.jsx)(_e.a,{item:!0,xs:6,children:Object(le.jsx)(Ge.a,{control:Object(le.jsx)(Fe.a,{checked:null!==c&&void 0!==c&&c,onChange:function(){i(Le()),localStorage.setItem("darkMode",!c)}}),label:"Dark Theme"})})]})})]})},qe=n.p+"static/media/Muay_Thai_Sarama_ROUND_1.d86445b7.mp3",Ye=function(){var e=Object(l.b)(),t=Object(l.c)(q),n=Object(l.c)(Q),a=Object(l.c)(J),r=Object(l.c)(V),c=Object(i.useRef)(null);return Object(i.useEffect)((function(){c.current.seek(0),a&&e(M({status:v.RUNNING}))}),[a,e]),Object(le.jsx)(he.a,{src:qe,playing:t===v.RUNNING&&""!==r,mute:n,ref:c,loop:!0,html5:!0})},$e=Object(X.a)({app:{overflow:"hidden",height:"100%",borderRadius:0},appBar:{position:"fixed",left:0,bottom:0,borderRadius:"5px 5px 0 0",zIndex:1100,boxSizing:"border-box",width:"100%"}}),Ke=function(){var e=$e(),t=Object(i.useState)(0),n=Object(o.a)(t,2),a=n[0],r=n[1],c=Object(i.useState)(0),s=Object(o.a)(c,2),l=s[0],u=s[1],d=Object(i.useState)(!1),m=Object(o.a)(d,2),j=m[0],b=m[1],f=function(){var e=window.innerHeight-a;u(e)},p=function(e,t){"boolean"===typeof t&&b(t)};return Object(i.useCallback)(f,[a]),Object(i.useEffect)((function(){return f(),window.addEventListener("resize",f),function(){window.removeEventListener("resize",f)}})),Object(le.jsxs)(Z.a,{elevation:0,className:"App ".concat(e.app),children:[Object(le.jsx)(te.a,{className:e.mainSection,children:Object(le.jsx)(xe,{heightOfMainSection:l})}),Object(le.jsx)(te.a,{className:e.appBar,children:Object(le.jsx)(Ue,{setHeightOfControlPanel:r,handleModalStatus:p})}),Object(le.jsx)(Ye,{}),Object(le.jsx)(Je,{open:j,handleOpen:p})]})},Qe=n(159),Ve=n(158),Xe=n(84),Ze=n.n(Xe),et=function(){var e=Object(l.c)(We),t=a.a.useMemo((function(){return Object(Ve.a)({palette:{primary:{main:Ze.a[500]},type:e?"dark":"light"}})}),[e]);return Object(le.jsx)(Qe.a,{theme:t,children:Object(le.jsx)(Ke,{})})},tt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function nt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var it=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,172)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),r(e),c(e)}))},at=Object(O.a)({reducer:{timers:y,settings:Ee}});at.subscribe(Object(u.throttle)((function(){!function(e){var t=e.timers;try{var n=t.loop.total,i=t.ids,a=Object(u.cloneDeep)(t.entities);Object.values(a).forEach((function(e){e.remainTime&&delete e.remainTime}));var r={ids:i,entities:a,totalLoop:n};localStorage.setItem("timers",JSON.stringify(r))}catch(c){}}({timers:at.getState().timers})}),1e3));var rt=at;c.a.render(Object(le.jsx)(a.a.StrictMode,{children:Object(le.jsx)(l.a,{store:rt,children:Object(le.jsx)(et,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/react-redux-training-timer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/react-redux-training-timer","/service-worker.js");tt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var i=n.headers.get("content-type");404===n.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):nt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):nt(t,e)}))}}(),it()}},[[117,1,2]]]);
//# sourceMappingURL=main.4c0f27a9.chunk.js.map