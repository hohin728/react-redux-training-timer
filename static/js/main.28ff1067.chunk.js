(this["webpackJsonpreact-redux-training-timer"]=this["webpackJsonpreact-redux-training-timer"]||[]).push([[0],{105:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(10),c=n.n(r),o=(n(93),n(94),n(46)),s=n(38),l=n(9),u=n(68),d=n(45),m=n(50),j=n(25),b=function(e){var t=e.minute,n=e.second;return Object(j.isInteger)(t)&&Object(j.isInteger)(n)?1e3*(60*t+n):0},f=function(e){var t=e&&e.timerId?e.timerId:Object(j.uniqueId)(),n={id:t,label:e&&e.label?e.label:"timer label "+t,minute:e&&e.minute?e.minute:0,second:e&&e.second?e.second:3,remainTime:0,music:e&&e.music?e.music:""};return n.remainTime=b({minute:n.minute,second:n.second}),n},h={RUNNING:"RUNNING",PAUSED:"PAUSED",STOPPED:"STOPPED"},O=Object(d.b)(),p=O.getInitialState({showCountdown:!1,delay:10,activeTimerId:null,status:h.STOPPED,loop:{current:1,total:1},mute:{alarm:!1,music:!1}}),v=Object(d.c)({name:"timers",initialState:p,reducers:{timersInitialized:O.addMany,timerAdded:O.addOne,timerDeleted:O.removeOne,timerSetLabel:function(e,t){var n=t.payload,i=n.timerId,a=n.label;e.entities[i].label=a},timerSetTime:{reducer:function(e,t){var n=t.payload,i=n.timerId,a=n.value,r=n.timeUnit,c=e.entities[i];"minute"!==r&&"second"!==r||(c[r]=a,c.remainTime=1e3*(60*c.minute+c.second))},prepare:function(e,t,n){return{payload:{timerId:e,value:t,timeUnit:n}}}},timerSetMusic:function(e,t){var n=t.payload,i=n.timerId,a=n.music;e.entities[i].music=a},timerDeductTime:{reducer:function(e,t){var n=t.payload,i=n.timerId,a=n.delay;e.entities[i].remainTime-=a},prepare:function(e){var t=e.timerId,n=e.delay;return n||(n=1e3),{payload:{timerId:t,delay:n}}}},timerStatusUpdated:function(e,t){var n=t.payload.status;e.status=n},timerSetNextTimer:function(e){var t,n=Object.values(e.entities),i=Object(u.a)(n.entries());try{for(i.s();!(t=i.n()).done;){var a=Object(o.a)(t.value,2),r=a[0],c=a[1];if(c.remainTime>0){e.activeTimerId=c.id;break}r===n.length-1&&(e.status=h.STOPPED)}}catch(s){i.e(s)}finally{i.f()}},timerDelayUpdated:function(e,t){var n=t.payload.delay;e.delay=n},timerResetTimers:function(e){e.activeTimerId=null,e.status=h.STOPPED,Object.values(e.entities).forEach((function(e){e.remainTime=b({minute:e.minute,second:e.second})})),e.loop.current=1},timerResetRemainTime:function(e){Object.values(e.entities).forEach((function(e){e.remainTime=b({minute:e.minute,second:e.second})}))},timerSetShowCountdown:function(e,t){var n=t.payload.showCountdown;e.showCountdown=n},timerSetLoop:function(e,t){var n=t.payload,i=n.current,a=n.total;i&&Object(j.isInteger)(i)&&(e.loop.current=i),a&&Object(j.isInteger)(a)&&(e.loop.total=a)},timerToggledMute:function(e,t){var n=t.payload.muteType;"alarm"===n&&(e.mute.alarm=!e.mute.alarm),"music"===n&&(e.mute.music=!e.mute.music)}}}),x=v.reducer,g=v.actions,y=g.timersInitialized,I=g.timerAdded,N=g.timerDeleted,w=g.timerSetLabel,T=g.timerSetTime,S=g.timerSetMusic,C=g.timerDeductTime,P=g.timerStatusUpdated,k=g.timerSetNextTimer,R=g.timerDelayUpdated,U=g.timerResetTimers,E=g.timerResetRemainTime,D=g.timerSetShowCountdown,M=g.timerSetLoop,z=g.timerToggledMute,A=O.getSelectors((function(e){return e.timers})),B=A.selectAll,L=A.selectById,W=A.selectTotal,G=function(e){return e.timers.showCountdown},_=function(e){return e.timers.delay},F=function(e){return e.timers.activeTimerId},H=function(e){return e.timers.status},q=Object(m.a)(B,W,(function(e,t){return Object.values(e)[t-1].id})),J=function(e){return e.timers.loop.current},Y=function(e){return e.timers.loop.total},$=function(e){return e.timers.mute.music},K=n(132),Q=n(146),V=n(134),X=n(136),Z=n(147),ee=n(139),te=n(149),ne=n(145),ie=n(150),ae=n(73),re=n.n(ae),ce=n(3),oe=Object(K.a)((function(e){return{musicInput:{minWidth:200},timerContainer:Object(s.a)({borderRadius:30,padding:"10px 20px"},e.breakpoints.up("sm"),{padding:"20px 40px"}),timerToolbar:Object(s.a)({justifyContent:"center"},e.breakpoints.up("sm"),{justifyContent:"flex-start"}),deleteButton:{opacity:.2,position:"absolute",top:15,right:20,transition:"opacity 0.5s ease",zIndex:2,"&:hover":{opacity:1}}}})),se=function(e){var t,n,i=e.id,a=Object(l.b)(),r=oe(),c=Object(l.c)((function(e){return L(e,i)})),o=function(e){var t=e.event.target.value,n=e.timeUnit;a(T(c.id,parseInt(t),n))};return Object(ce.jsx)(Q.a,{my:2,children:Object(ce.jsxs)(V.a,{elevation:1,variant:"outlined",className:r.timerContainer,style:{position:"relative"},children:[Object(ce.jsx)(X.a,{onClick:function(){return a(N(c.id))},className:r.deleteButton,size:"small",children:Object(ce.jsx)(re.a,{fontSize:"small"})}),Object(ce.jsx)(Q.a,{m:1,display:"flex",justifyContent:"center",children:Object(ce.jsx)(Z.a,{value:null!==(t=c.label)&&void 0!==t?t:"",onChange:function(e){return function(e){return a(w({timerId:c.id,label:e.target.value}))}(e)},inputProps:{style:{textAlign:"center"}}})}),Object(ce.jsxs)(Q.a,{display:"flex",alignItems:"center",justifyContent:"center",children:[Object(ce.jsx)(Q.a,{m:1,children:Object(ce.jsx)(ee.a,{children:Object(ce.jsx)(Z.a,{id:"timer-".concat(i,"-min"),label:"Minute",type:"number",InputLabelProps:{shrink:!0},inputProps:{min:0,max:59},variant:"outlined",onChange:function(e){return o({event:e,timeUnit:"minute"})},value:c.minute})})}),Object(ce.jsx)(Q.a,{m:1,children:":"}),Object(ce.jsx)(Q.a,{m:1,children:Object(ce.jsx)(ee.a,{children:Object(ce.jsx)(Z.a,{id:"timer-".concat(i,"-sec"),label:"Second",type:"number",InputLabelProps:{shrink:!0},inputProps:{min:0,max:59},variant:"outlined",onChange:function(e){return o({event:e,timeUnit:"second"})},value:c.second})})})]}),Object(ce.jsx)(Q.a,{display:"flex",className:r.timerToolbar,children:Object(ce.jsxs)(ee.a,{children:[Object(ce.jsx)(te.a,{id:"timer-music-".concat(c.id,"-label"),children:"Timer Music"}),Object(ce.jsxs)(ne.a,{labelId:"timer-music-".concat(c.id,"-label"),id:"timer-music-".concat(c.id),value:null!==(n=c.music)&&void 0!==n?n:"",onChange:function(e){return a(S({timerId:c.id,music:e.target.value}))},className:r.musicInput,children:[Object(ce.jsx)(ie.a,{value:"",children:"No Music"}),Object(ce.jsx)(ie.a,{value:"Muay_Thai_Sarama_ROUND_1.mp3",children:"Muay Thai Music"})]})]})})]})})},le=function(){var e=Object(l.c)((function(e){return B(e)}));return Object(ce.jsx)("main",{children:e.map((function(e){return Object(ce.jsx)(se,{id:e.id},e.id)}))})};var ue=n.p+"static/media/Muay_Thai_Sarama_ROUND_1.d86445b7.mp3",de=n(59),me=n.n(de),je=n(140),be=Object(K.a)({digits:{margin:10},millisecond:{position:"absolute",bottom:5,right:-40},mainDisplay:{position:"relative",width:"fit-content",margin:"0 auto"}}),fe=function(e){var t,n=e.alarmPlayer,a=Object(l.b)(),r=be(),c=Object(i.useRef)(null),o=Object(l.c)(F),s=Object(l.c)((function(e){return L(e,o)})),u=Object(l.c)((function(e){return _(e)})),d=Object(l.c)(H),m=Object(l.c)(q),b=Object(l.c)(J),f=Object(l.c)(Y),O=Object(l.c)($),p=(t=s.remainTime,!Object(j.isInteger)(t)||t<=0?{millisec:0,second:0,minute:0}:{millisec:t%1e3/10,second:Math.floor(t/1e3)%60,minute:Math.floor(t/1e3/60)%60}),v=function(e){return e<10?"0"+e:e};return function(e,t){var n=Object(i.useRef)();Object(i.useEffect)((function(){n.current=e}),[e]),Object(i.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){s.remainTime>0?a(C({timerId:s.id,delay:u})):(n.current.play(),o===m?b<f?(a(M({current:b+1})),a(E()),a(k())):a(P({status:h.STOPPED})):a(k()))}),d===h.RUNNING&&o&&s.id===o?u:null),Object(i.useEffect)((function(){o&&(c.current.seek(0),a(P({status:h.RUNNING})))}),[o,a]),Object(i.useEffect)((function(){d===h.STOPPED&&c.current.seek(0)}),[d,a]),Object(ce.jsxs)(Q.a,{textAlign:"center",height:"100%",display:"flex",flexDirection:"column",children:[Object(ce.jsxs)(je.a,{variant:"h4",component:"div",style:{marginTop:10},children:["Round: ",b," / ",f]}),Object(ce.jsxs)(Q.a,{display:"flex",justifyContent:"center",flexDirection:"column",height:"100%",children:[Object(ce.jsx)(je.a,{variant:"h4",component:"div",style:{marginBottom:10},children:s.label}),Object(ce.jsxs)(Q.a,{display:"flex",justifyContent:"center",alignItems:"center",className:r.mainDisplay,children:[Object(ce.jsx)(je.a,{variant:"h2",component:"div",className:"".concat(r.digits),children:v(p.minute)}),Object(ce.jsx)(je.a,{variant:"h3",children:":"}),Object(ce.jsx)(je.a,{variant:"h2",component:"div",className:"".concat(r.digits),children:v(p.second)}),Object(ce.jsx)(je.a,{variant:"h5",className:"".concat(r.millisecond," ").concat(r.digits),children:v(p.millisec)})]})]}),Object(ce.jsx)(me.a,{src:ue,playing:d===h.RUNNING&&""!==s.music,mute:O,ref:c,loop:!0,html5:!0})]})},he=n.p+"static/media/timesup.e69d4f91.mp3",Oe=n(141),pe=Object(K.a)({mainSection:{overflowY:"scroll"}}),ve=function(e){var t=e.heightOfMainSection,n=pe(),a=Object(l.c)(H),r=Object(l.c)(G),c=Object(i.useRef)(null);return a===h.RUNNING||r?Object(ce.jsxs)(Oe.a,{maxWidth:"sm",style:{height:t},children:[Object(ce.jsx)(fe,{alarmPlayer:c}),Object(ce.jsx)(me.a,{src:he,playing:!1,html5:!0,ref:c})]}):Object(ce.jsx)(Q.a,{style:{height:t},className:n.mainSection,children:Object(ce.jsx)(Oe.a,{maxWidth:"sm",children:Object(ce.jsx)(le,{})})})},xe=n(142),ge=n(75),ye=n.n(ge),Ie=n(76),Ne=n.n(Ie),we=n(74),Te=n.n(we),Se=Object(K.a)((function(e){return{formControl:{width:125},controlPanelContainer:Object(s.a)({position:"relative",padding:e.spacing(1)},e.breakpoints.up("sm"),{padding:e.spacing(3)}),addButton:Object(s.a)({position:"absolute",top:0,right:0,zIndex:2},e.breakpoints.up("sm"),{right:50}),toolbar:{marginTop:16}}})),Ce=function(e){var t=e.setHeightOfControlPanel,n=Se(),a=Object(l.b)(),r=Object(l.c)(_),c=Object(l.c)(H),o=Object(l.c)(F),s=Object(l.c)(Y),u=Object(l.c)($),d=Object(l.c)(G);return Object(i.useEffect)((function(){var e=document.getElementById("control-panel").clientHeight;t(e)})),Object(ce.jsx)(V.a,{elevation:3,id:"control-panel",children:Object(ce.jsxs)(Oe.a,{maxWidth:"md",className:n.controlPanelContainer,children:[Object(ce.jsx)(X.a,{size:"medium",onClick:function(){return a(I(f()))},disabled:d,className:n.addButton,children:Object(ce.jsx)(Te.a,{})}),Object(ce.jsxs)(Q.a,{display:"flex",justifyContent:"center",children:[Object(ce.jsx)(Q.a,{m:1,children:Object(ce.jsx)(xe.a,{onClick:function(){o||a(k()),a(P({status:c===h.RUNNING?h.PAUSED:h.RUNNING})),a(D({showCountdown:!0}))},variant:"contained",color:"primary",size:"large",children:c===h.RUNNING?"Pause":"Start"})}),Object(ce.jsx)(Q.a,{m:1,children:Object(ce.jsx)(xe.a,{onClick:function(){a(D({showCountdown:!1})),a(U())},variant:"contained",color:"secondary",size:"large",children:"Reset"})})]}),Object(ce.jsxs)(Q.a,{display:"flex",justifyContent:"space-around",className:n.toolbar,children:[Object(ce.jsx)(X.a,{onClick:function(){return a(z({muteType:"music"}))},children:u?Object(ce.jsx)(ye.a,{}):Object(ce.jsx)(Ne.a,{})}),Object(ce.jsxs)(ee.a,{className:n.formControl,children:[Object(ce.jsx)(te.a,{children:"Refresh rate"}),Object(ce.jsxs)(ne.a,{id:"updateFreq",value:r,onChange:function(e){return function(e){return a(R({delay:e.target.value}))}(e)},children:[Object(ce.jsx)(ie.a,{value:10,children:"10"}),Object(ce.jsx)(ie.a,{value:100,children:"100"}),Object(ce.jsx)(ie.a,{value:1e3,children:"1000"})]})]}),Object(ce.jsx)(ee.a,{className:n.formControl,children:Object(ce.jsx)(Z.a,{id:"loop",label:"No. of rounds",type:"number",value:s,onChange:function(e){return function(e){a(M({total:parseInt(e.target.value)}))}(e)},disabled:d})})]})]})})},Pe=Object(K.a)({app:{overflow:"hidden"},appBar:{position:"fixed",left:0,bottom:0,borderRadius:"5px 5px 0 0",zIndex:1100,boxSizing:"border-box",width:"100%"}});var ke=function(){var e=Pe(),t=Object(i.useState)(0),n=Object(o.a)(t,2),a=n[0],r=n[1],c=Object(i.useState)(0),s=Object(o.a)(c,2),l=s[0],u=s[1],d=function(){var e=window.innerHeight-a;u(e)};return Object(i.useEffect)((function(){d()}),[a]),Object(i.useEffect)((function(){var e=function(e,t){var n=arguments,i=this,a=null;return function(){clearTimeout(a),a=setTimeout((function(){a=null,e.apply(i,n)}),t)}}(d,1e3);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}})),Object(ce.jsxs)(Q.a,{className:"App ".concat(e.app),children:[Object(ce.jsx)(Q.a,{className:e.mainSection,children:Object(ce.jsx)(ve,{heightOfMainSection:l})}),Object(ce.jsx)(Q.a,{className:e.appBar,children:Object(ce.jsx)(Ce,{setHeightOfControlPanel:r})})]})},Re=n(143),Ue=n(77),Ee=n.n(Ue),De=Object(Re.a)({palette:{primary:{main:Ee.a[500]}}}),Me=n(144),ze=function(){return Object(ce.jsx)(Me.a,{theme:De,children:Object(ce.jsx)(ke,{})})},Ae=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Be(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,152)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),r(e),c(e)}))},We=Object(d.a)({reducer:{timers:x}});We.dispatch(y(function(){for(var e=[],t=0;t<3;t++){var n=f();e.push(n)}return e}())),c.a.render(Object(ce.jsx)(a.a.StrictMode,{children:Object(ce.jsx)(l.a,{store:We,children:Object(ce.jsx)(ze,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/react-redux-training-timer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/react-redux-training-timer","/service-worker.js");Ae?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var i=n.headers.get("content-type");404===n.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Be(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Be(t,e)}))}}(),Le()},93:function(e,t,n){},94:function(e,t,n){}},[[105,1,2]]]);
//# sourceMappingURL=main.28ff1067.chunk.js.map